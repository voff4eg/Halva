<div id="map"></div>
<span>Mouse over a cluster to see the bounds of its children and click a cluster to zoom to those bounds</span>
<script type="text/javascript">
$(document).ready(function() {
  initMap();
});

function initMap(){
  $.ajax({
    url: '/wifi',
    type: 'get',
    success: function(response){
      if(response){
        var cloudmadeUrl = 'http://{s}.tile.cloudmade.com/BC9A493B41014CAABB98F0471D759707/997/256/{z}/{x}/{y}.png',
          cloudmadeAttribution = 'Map data &copy; 2011 OpenStreetMap contributors, Imagery &copy; 2011 CloudMade, Points &copy 2012 LINZ',
          cloudmade = L.tileLayer(cloudmadeUrl, {maxZoom: 17, attribution: cloudmadeAttribution}),
          latlng = L.latLng(55.7522, 37.6156);

        var map = L.map('map', {center: latlng, zoom: 13, layers: [cloudmade]});

        var markers = L.markerClusterGroup();
        
        for (var i = 0; i < addressPoints.length; i++) {
          var a = addressPoints[i];
          var title = a[2];
          var marker = L.marker(new L.LatLng(a[0], a[1]), { title: title });
          marker.bindPopup(title);
          markers.addLayer(marker);
        }

        map.addLayer(markers);       
      }
    }
  });
}
</script>